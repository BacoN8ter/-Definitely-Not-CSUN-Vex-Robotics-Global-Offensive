#pragma config(Sensor, in1,    clawPot,        sensorPotentiometer)
#pragma config(Sensor, in8,    liftPot,        sensorPotentiometer)
#pragma config(Sensor, dgtl1,  leftDriveEncoder, sensorQuadEncoder)
#pragma config(Sensor, dgtl11, rightDriveEncoder, sensorQuadEncoder)
#pragma config(Motor,  port1,           leftRoller,    tmotorVex393_HBridge, openLoop)
#pragma config(Motor,  port2,           leftDriveBack, tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port3,           leftDriveCenter, tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port4,           leftDriveFront, tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port5,           leftLift,      tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port6,           rightLift,     tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port7,           rightDriveBack, tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port8,           rightDriveCenter, tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port9,           rightDriveFront, tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port10,          rightRoller,   tmotorVex393_HBridge, openLoop, reversed)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#pragma platform(VEX2)

#pragma competitionControl(Competition)

#include "Vex_Competition_Includes.c"
#include "MickDriverControl.h"
#include "MickAutonControl.h"
//#include "UART.h"



void pre_auton()
{
  // Set bStopTasksBetweenModes to false if you want to keep user created tasks
  // running between Autonomous and Driver controlled modes. You will need to
  // manage all user created tasks if set to false.
  bStopTasksBetweenModes = true;

  liftPotentiometer.minValue = 245;
  liftPotentiometer.maxValue = 270;

  clawPotentiometer.minValue = 28;
  clawPotentiometer.maxValue = 15;
}

//0 - red pole side | blue opposite
//1 - red opposite  | blue pole (not ready)
//2 - red pole side option (ready) cube first
int auton = 0;

task autonomous()
{

	clearAll(actOnSensors);
	startTask(UpdateSensors);
	if(auton == 0)
	{
	//drive to unlock claw
	SetDrive(127);
	wait1Msec(500);
	startTask(StarLift);
	SetDrive(-127);
	wait1Msec(250);
	SetDrive(0);

	//drive to fence
	startTask(OpenClaw);
	MoveForward(475);

	//stopTask OpenClaw if still in existence
	stopTask(StarLift);
	stopTask(OpenClaw);


	//Move back
	MoveBackward(-500);
	SetDrive(0);

	//lower lift
	startTask(LowLift);
	wait1Msec(750);

	//turn to cube
	TurnLeft(150);
	SetDrive(0);
	wait1Msec(250);

	//move forward and grab cube
	MoveForward(210);
	stopTask(LowLift);
	CloseClaw();
	wait1Msec(500);
	startTask(HighLift);
	MoveForward(100);
	SetDrive(0);
	wait1Msec(250);
	TurnRight(160);

	SetDrive(0);
	wait1Msec(250);
	//move forward and release the cube
	MoveForward(467);
	ReleasePayload();
	stopTask(HighLift);

	//Move back and turn while lowering lift
	MoveBackward(-450);
	SetDrive(0);
	wait1Msec(500);
	startTask(LowLift);
	TurnLeft(240);
	MoveForward(170);
	stopTask(LowLift);
	CloseClaw();
	startTask(HighLift);
	TurnRight(200);
	MoveForward(480);
	stopTask(HighLift);
	startTask(OpenClaw);
	}
	else if (auton == 1) /////////////////////////////////////////////////////
	{
		//drive to unlock claw
	SetDrive(127);
	wait1Msec(500);
	startTask(StarLift);
	SetDrive(-127);
	wait1Msec(250);
	SetDrive(0);

	//drive to fence
	startTask(OpenClaw);
	MoveForward(475);

	//stopTask OpenClaw if still in existence
	stopTask(StarLift);
	stopTask(OpenClaw);


	//Move back
	MoveBackward(-500);
	SetDrive(0);

	//lower lift
	startTask(LowLift);
	wait1Msec(250);

	//turn to cube
	TurnRight(150);
	SetDrive(0);
	wait1Msec(250);

	//move forward and grab cube
	MoveForward(210);
	stopTask(LowLift);
	CloseClaw();
	startTask(HighLift);
	MoveForward(100);
	SetDrive(0);
	wait1Msec(250);
	TurnLeft(160);

	SetDrive(0);
	wait1Msec(250);
	//move forward and release the cube
	MoveForward(467);
	ReleasePayload();
	stopTask(HighLift);

	//Move back and turn while lowering lift
	MoveBackward(-450);
	SetDrive(0);
	wait1Msec(500);
	startTask(LowLift);
	TurnRight(240);
	MoveForward(170);
	stopTask(LowLift);
	CloseClaw();
	startTask(HighLift);
	TurnLeft(200);
	MoveForward(480);
	stopTask(HighLift);
	startTask(OpenClaw);
	}
	else if(auton == 2) ////////////////////////////////
	{
		//drive to unlock claw
		SetDrive(127);
		wait1Msec(500);
		startTask(OpenClaw);
		SetDrive(-127);
		wait1Msec(250);
		TurnLeft(150);

		//move forward and grab cube
		MoveForward(210);
		stopTask(OpenClaw);
		CloseClaw();
		startTask(HighLift);
		MoveForward(100);
		SetDrive(0);
		wait1Msec(125);
		TurnRight(210);

		//move forward and release the cube
		MoveForward(500);
		ReleasePayload();
		stopTask(HighLift);

		//Move back and turn while lowering lift
		MoveBackward(-420);
		SetDrive(0);
		wait1Msec(500);
		startTask(LowLift);
		TurnLeft(300);
		MoveForward(180);
		stopTask(LowLift);
		CloseClaw();
		startTask(HighLift);
		TurnLeft(200);
		MoveForward(480);
		stopTask(HighLift);
		startTask(OpenClaw);

	}
	wait1Msec(10000);
}


task usercontrol()
{

  while (true)
  {
  	Drive();
  	Lift();
  	Roller();
  }
}
